# 백준 2302번 - 극장 좌석

[문제 보러 가기](https://www.acmicpc.net/problem/2302)

## 요약

어떤 극장의 좌석은 한 줄로 되어 있으며, 왼쪽부터 차례대로 1번부터 N번까지 번호가 매겨져 있다.  
공연을 보러 온 사람들은 입장권에 표시되어 있는 좌석에 앉아야 하며, 바로 왼쪽 또는 오른쪽 좌석으로는 자리를 옮길 수 있다.  
VIP회원들은 반드시 자기 좌석에만 앉아야 한다.

오늘 공연의 입장권이 매진된 경우, VIP회원들의 좌석 번호들이 주어졌을 때, 사람들이 좌석에 앉는 서로 다른 방법의 가짓수를 구하는 프로그램을 작성

예를 들어서, 좌석이 9개이고, 4번 좌석과 7번 좌석이 VIP석인 경우에 <123456789>는 물론 가능한 배치이다.   
또한 <213465789> 와 <132465798> 도 가능한 배치이다.  
그러나 <312456789> 와 <123546789> 는 허용되지 않는 배치 방법이다.

## 핵심 규칙

- 첫째 줄에는 좌석의 개수 N이 입력된다. 
    - N은 1 이상 40 이하이다. 
- 둘째 줄에는 고정석의 개수 M이 입력된다. 
    - M은 0 이상 N 이하이다. 
    - 다음 M 개의 줄에는 고정석의 번호가 작은 수부터 큰 수의 순서로 한 줄에 하나씩 입력된다.
- 주어진 조건을 만족하면서 사람들이 좌석에 앉을 수 있는 방법의 가짓수를 출력한다. 
    - 방법의 가짓수는 2,000,000,000을 넘지 않는다. (2,000,000,000 < 231-1)

## 예제 입출력

입력 및 출력 예시는 [문제 링크](https://www.acmicpc.net/problem/2302) 참고.

### 문제풀이

`1. 관찰`

123456789에서 vip석이 4와 7인 경우를 보자.

이 경우 4와 7을 제외한 123, 56, 89에서 자리의 변동이 있을 수 있다.

먼저 1의 경우 2와 자리를 바꿀 수 있다.  
2의 경우 3과 자리를 바꿀 수 있다.
5는 6과 자리를 바꿀 수 있고, 8은 9와 자리를 바꿀 수 있다.

1, 2, 5, 8이 자리를 바꿀 수 있기 때문에 4가지 경우의 수에 따른 가짓수를선택하면 된다.

이때 주의해야 할 부분이 만약 1이 자리를 바꾼 경우, 2는 자리를 바꿀 수 없다는 것이다.

결국 5와 8 -> 2*2와 1과 2로 가능한3을 곱해서 총 가짓수는 12이다.

`2. 일반화`

연결된 수가 자리를 모두 바꿀 수 있는 경우를 살펴보자.

1 -> 1가지
12 -> 12, 21, 2가지
123 -> 123, 132, 213, 3가지
1234 -> 1234, 2134, 1324, 1243, 2143, 5가지
12345 -> 12345, 21345, 13245, 12435, 12354, 21435, 21354, 13254, 8가지

왜 이런게 가능한가?

5가지가 연결된 수를 보면, 3가지 자릿수에 추가로 2개의 자릿수가 더해진 형태 또는 4가지 자릿수에 추가로 1개의 자릿수가 더해진 형태로 볼 수 있다.

5의 위치가 고정인 경우는 앞자리 4개를 바꾸면서 수를 늘릴 수 있고, 5의 위치가 4와 바뀐 경우는 앞자리 3개를 바꾸면서 수를 늘릴 수 있기 때문이다.

`3. 풀이`

vip석의 위치를 알기 때문에, 전체 수를 vip석을 제외한 위치로 나눈다.
